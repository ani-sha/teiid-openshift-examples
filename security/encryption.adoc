= Securing Teiid Enpoints

Configure Teiid pods to encrypt network traffic between clients and endpoints with TLS certificates.

You can generate OpenShift service certificates or use custom TLS certificates for this purpose

== Generating Service Certificates for Encryption
The Teiid Operator can generate OpenShift service certificates that:

* Consist of a certificate, tls.crt, and key, tls.key, in PEM format that OpenShift stores in a secret.

* Are signed by the OpenShift CA, are valid for one year, and are automatically replaced before expiration.

The service certificates are default option, when custom TLS certificates are not configured these are automatically generated by the Operator

== Adding TLS Certificates to Encryption Secrets
To use custom certificates, add a TLS certificate/key pair to a OpenShift secret and configure Teiid to use it for endpoint encryption.


Add the encryption secret to your OpenShift namespace.

----
apiVersion: v1
kind: Secret
type: kubernetes.io/tls
metadata:
  annotations:
    service.alpha.openshift.io/expiry: '2022-02-05T19:27:37Z'
  name: dv-customer <1>
  namespace: myproject <2>

data: <3>
  tls.crt: >-
    <base64 content>
  tls.key: >-
    <base64 content>
----

<1> name of secret, must match with the name defined in Operator's CR YAML file.
<2> namespace, should be same as where the VSB based service is being deployed.
<3> PEM format, certificate and key in base64 format.

---
$ oc apply -f tls_secret.yaml
---

Once the above is created as secret, if the name matches the Operator will pick this secret and use it for endpoint encryption.

NOTE: create the secret before creating the VDB service.